<!DOCTYPE html>
<html>
    <head>
        <style>
            * { margin: 0; overflow-x: hidden;}
            .container { width: 100vw; height: 100vh; }
        </style>
    </head>
    <body>
        <div class="container">  
            <canvas id="canvas" ></canvas>
        </div>
        <script src="../heatmap.js"></script>
        <script src="data.js"></script>
        <script>
            canvas.width  = window.innerWidth;
            canvas.height = window.innerHeight;

            function get(id) {
                return document.getElementById(id);
            }

            var heat = heatmap('canvas').data(data).max(18),
                frame;

            function draw() {
                console.time('draw');
                heat.draw();
                console.timeEnd('draw');
                frame = null;
            }

            draw();

            get('canvas').onmousemove = function (e) {
                heat.add([e.layerX, e.layerY, 1]);
                frame = frame || window.requestAnimationFrame(draw);
            };

            var radius = get('radius'),
                blur = get('blur'),
                changeType = 'oninput' in radius ? 'oninput' : 'onchange';

            radius[changeType] = blur[changeType] = function (e) {
                heat.radius(+radius.value, +blur.value);
                frame = frame || window.requestAnimationFrame(draw);
            };
        </script>
    </body>
</html>
